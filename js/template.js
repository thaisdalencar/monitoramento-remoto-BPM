var batimentos = [0,15,0,0,-10,60,-20,0,0,0,25,0,0];
var options = {
    responsive:true
};

var line_ecg = {

   labels : ["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],
   datasets : [
      {
      label: "My Second dataset",
      fillColor : "rgba(151,187,205,0)",
      strokeColor : "#009900",
      pointStrokeColor : "rgba(255,0,0,0)",
      pointHighlightFill : "rgba(255,0,0,0)",
      pointHighlightStroke : "rgba(151,187,205,0)",
      data : [288,294,303,312,323,335,345,355,365,377,387,396,409,417,426,437,445,452,460,466,471,476,481,483,486,488,488,490,489,487,486,484,481,478,475,472,470,467,462,455,449,442,436,430,423,416,410,404,398,394,391,386,383,382,379,379,379,378,378,380,381,383,385,386,387,390,392,393,395,397,397,398,399,398,399,399,397,395,395,392,390,388,385,382,380,376,373,370,366,363,359,356,352,348,345,341,337,334,330,326,323,320,318,318,318,318,319,321,322,322,321,319,319,319,320,320,322,320,320,321,320,320,322,320,319,320,319,319,319,318,316,318,317,315,315,314,312,310,310,308,306,306,304,303,304,304,306,310,315,323,332,340,350,361,372,384,397,411,423,438,451,462,475,487,497,508,518,524,531,538,543,546,550,553,553,555,554,552,550,549,545,541,538,531,526,522,514,506,501,492,485,477,470,461,454,447,440,433,428,422,418,415,412,411,410,410,410,411,412,413,416,417,418,421,422,424,426,427,427,429,430,429,429,430,430,432,432,429,426,424,420,416,414,408,403,400,396,391,387,383,377,375,371,365,362,358,353,351,348,343,340,338,333,331,329,325,322,320,320,320,322,323,321,322,322,320,321,322,321,321,322,321,320,322,321,321,322,320,320,320,320,319,320,319,319,318,318,316,316,316,315,316,319,323,326,331,337,343,351,359,368,378,388,398,411,421,431,441,453,462,471,481,489,496,503,509,514,519,522,524,526,527,527,527,526,524,522,519,515,511,506,500,495,488,480,474,466,457,449,442,433,426,419,413,406,403,399,394,393,392,390,391,392,392,393,396,397,399,403,404,406,408,410,411,413,414,415,416,417,416,417,416,415,414,412,409,407,405,401,400,398,394,391,389,384,381,378,373,369,366,362,357,353,349,344,341,338,333,330,327,323,320,319,318,319,321,322,321,321,320,320,321,323,322,322,320,318,317,317,316,317,318,317,318,318,319,318,318,318,317,317,316,315,316,316,317,321,325,329,336,343,352,362,374,386,400,416,430,444,460,473,487,501,512,524,534,544,552,561,567,572,578,582,583,586,587,585,585,584,581,576,574,568,562,556,549,541,532,523,512,502,493,481,471,462,451,442,434,426,418,413,407,402,399,397,394,394,393,393,394,394,394,396,397,396,398,398,397,398,398,398,398,399,399,399,400,399,398,398,397,396,396,394,393,392,390,387,385,383,378,375,371,367,363,359,353,348,344,339,334,329,325,320,318,318,317,318,319,322,323,323,321,321,322,320,320,322,320,320,322,321,320,320,320,320,321,320,320,320,320,319,319,320,319,321,323,323,324,327,329,333,339,344,350,359,368,377,388,399,408,419,430,439,448,458,465,472,480,484,488]
      }]
}             

window.onload = function(){
   var ctx = document.getElementById("GraficoLine").getContext("2d");
   ctx.canvas.height = 400;
   ctx.canvas.width = 1200;
   window.myLine_ecg =new Chart(ctx).Line(line_ecg, {
      responsive: true,
      animation: false
   });

   var chartInterval = null;
   function mover_ecg(vetor){
      var i=0;
      if(!chartInterval){
        chartInterval = setInterval(function(){
           console.log("mostar vetor="+vetor);               
           myLine_ecg.removeData();
           console.log("i="+i);
           console.log("vetor local="+vetor[i]);
           myLine_ecg.addData([vetor[i]], "");              
           myLine_ecg.update();
           i++;
          },100);
      }           
   }

    var cont = 0;
    console.log("iniciou");
    chamar_array();
    function chamar_array(){
      setInterval(function(){
          $.ajax({
              type: "GET",
              url: "return_of_python.php",
              success: function (data){
                  mover_ecg(data);  
                  cont = cont + 1;    
                  console.log("cont="+cont); 
                  console.log("tamanho array="+data.length); 
              },
              dataType: "json"
          });
      }, 4500);   
    }
}  
